# Circuit Breaker Environment Configuration Template
# Copy this file to .env and update values for your environment

# ===== AWS Configuration =====
AWS_REGION=us-east-1
AWS_ACCOUNT_ID=123456789012

# ===== Project Configuration =====
PROJECT_NAME=bank-circuit-breaker
ENVIRONMENT=dev

# ===== DynamoDB Configuration =====
STATE_TABLE=${PROJECT_NAME}-circuit-breaker-state-${ENVIRONMENT}

# ===== Lambda Function ARNs =====
# Update these after deploying your Lambda functions
FULL_SERVICE_FUNCTION=arn:aws:lambda:${AWS_REGION}:${AWS_ACCOUNT_ID}:function:${PROJECT_NAME}-full-service-${ENVIRONMENT}
DEGRADED_SERVICE_FUNCTION=arn:aws:lambda:${AWS_REGION}:${AWS_ACCOUNT_ID}:function:${PROJECT_NAME}-degraded-service-${ENVIRONMENT}
MAINTENANCE_SERVICE_FUNCTION=arn:aws:lambda:${AWS_REGION}:${AWS_ACCOUNT_ID}:function:${PROJECT_NAME}-maintenance-service-${ENVIRONMENT}
CIRCUIT_BREAKER_CONTROLLER_FUNCTION=arn:aws:lambda:${AWS_REGION}:${AWS_ACCOUNT_ID}:function:${PROJECT_NAME}-circuit-breaker-controller-${ENVIRONMENT}
ALARM_PROCESSOR_FUNCTION=arn:aws:lambda:${AWS_REGION}:${AWS_ACCOUNT_ID}:function:${PROJECT_NAME}-alarm-processor-${ENVIRONMENT}

# ===== SQS Configuration =====
CIRCUIT_BREAKER_ALARMS_QUEUE=https://sqs.${AWS_REGION}.amazonaws.com/${AWS_ACCOUNT_ID}/${PROJECT_NAME}-circuit-breaker-alarms-${ENVIRONMENT}
CIRCUIT_BREAKER_ALARMS_DLQ=https://sqs.${AWS_REGION}.amazonaws.com/${AWS_ACCOUNT_ID}/${PROJECT_NAME}-circuit-breaker-alarms-dlq-${ENVIRONMENT}

# ===== SNS Configuration =====
CIRCUIT_BREAKER_ALARMS_TOPIC=arn:aws:sns:${AWS_REGION}:${AWS_ACCOUNT_ID}:${PROJECT_NAME}-circuit-breaker-alarms-topic-${ENVIRONMENT}
CIRCUIT_BREAKER_ALERTS_TOPIC=arn:aws:sns:${AWS_REGION}:${AWS_ACCOUNT_ID}:${PROJECT_NAME}-circuit-breaker-alerts-${ENVIRONMENT}

# ===== CloudWatch Configuration =====
CLOUDWATCH_NAMESPACE_SERVICE=CircuitBreaker/Service
CLOUDWATCH_NAMESPACE_CONTROLLER=CircuitBreaker/Controller
CLOUDWATCH_NAMESPACE_ALARM_PROCESSOR=CircuitBreaker/AlarmProcessor

# ===== Circuit Breaker Thresholds =====
# Failure thresholds for transitions
LEVEL_1_TO_2_FAILURE_THRESHOLD=5
LEVEL_2_TO_3_FAILURE_THRESHOLD=10

# Success thresholds for recovery
LEVEL_3_TO_2_SUCCESS_THRESHOLD=3
LEVEL_2_TO_1_SUCCESS_THRESHOLD=5

# ===== Service Configuration =====
# Simulated failure rates for testing
FULL_SERVICE_FAILURE_RATE=0.05      # 5%
DEGRADED_SERVICE_FAILURE_RATE=0.02  # 2%
MAINTENANCE_SERVICE_FAILURE_RATE=0.10 # 10%

# ===== Monitoring Configuration =====
# Time windows for metrics evaluation (in seconds)
ALARM_EVALUATION_PERIOD=300  # 5 minutes
RECENT_ACTIVITY_WINDOW=300   # 5 minutes

# ===== API Gateway Configuration (if using) =====
# API_GATEWAY_URL=https://your-api-id.execute-api.${AWS_REGION}.amazonaws.com/prod
# API_GATEWAY_STAGE=prod

# ===== Deployment Configuration =====
DEPLOYMENT_BUCKET=${PROJECT_NAME}-deployments-${AWS_REGION}-${AWS_ACCOUNT_ID}

# ===== Debug Configuration =====
# Set to true for additional logging
DEBUG_MODE=false
LOG_LEVEL=INFO